(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(15),a=t.n(c),r=t(3),u=t(2),o=t(0),s=function(e){var n=e.addPerson,t=e.newName,c=e.newNumber,a=e.handleNameChange,r=e.handleNumberChange;return Object(o.jsxs)("form",{onSubmit:n,children:[Object(o.jsxs)("div",{children:["name:",Object(o.jsx)("input",{value:t,onChange:a})]}),Object(o.jsxs)("div",{children:["number:",Object(o.jsx)("input",{type:"number",value:c,onChange:r})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},i=function(e){var n=e.filteredPersons,t=e.removePerson;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)("ul",{children:n.map((function(e){return Object(o.jsxs)("li",{children:[e.name," ",e.number," ",Object(o.jsx)("button",{onClick:function(){return t(e)},children:"Delete"})]},e.id)}))})]})},d=function(e){var n=e.search,t=e.handleSearchChange;return Object(o.jsxs)("div",{children:["Search:",Object(o.jsx)("input",{value:n,onChange:t})]})},l=t(4),j=t.n(l),h="/api/persons",b=function(){return j.a.get(h).then((function(e){return e.data}))},f=function(e){return j.a.post(h,e).then((function(e){return e.data}))},m=function(e){return j.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},O=function(e){return j.a.put("".concat(h,"/").concat(e.id),e).then((function(e){return e.data}))},x=(t(40),function(e){var n=e.notification,t=n.message,c=n.status;return""===t?null:Object(o.jsx)("div",{className:c,children:Object(o.jsx)("p",{children:t})})}),p=function(){var e=Object(u.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],a=Object(u.useState)(""),l=Object(r.a)(a,2),j=l[0],h=l[1],p=Object(u.useState)(""),v=Object(r.a)(p,2),g=v[0],w=v[1],C=Object(u.useState)(""),y=Object(r.a)(C,2),S=y[0],N=y[1],P=Object(u.useState)({message:"",status:""}),k=Object(r.a)(P,2),D=k[0],E=k[1],J=t.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())}));Object(u.useEffect)((function(){b().then((function(e){c(e)}))}),[]);var L=function(e,n){E({status:e,message:n}),setTimeout((function(){A()}),3e3)},A=function(){E({status:"",message:""})};return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(x,{notification:D}),Object(o.jsx)(d,{search:S,handleSearchChange:function(e){N(e.target.value)}}),Object(o.jsx)("h3",{children:"Add a new number"}),Object(o.jsx)(s,{addPerson:function(e){e.preventDefault();var n={name:j,number:g},a=t.find((function(e){return e.name===j}));a?window.confirm("".concat(n.name," is already added, do you want to update?"))&&(n.id=a.id,O(n).then((function(e){c(t.map((function(e){return e.name===n.name?n:e}))).catch((function(e){L("success","".concat(n.name," was updated!"))}))}))):f(n).then((function(e){c(t.concat(e)),h(""),w(""),L("success","".concat(j," added successfully"))}))},handleNameChange:function(e){h(e.target.value)},handleNumberChange:function(e){w(e.target.value)}}),Object(o.jsx)(i,{filteredPersons:J,removePerson:function(e){window.confirm("Do you really want to delete ".concat(e.name))&&m(e.id).then((function(n){c(t.filter((function(n){return n.id!==e.id}))),console.log(t),L("success","".concat(e.name," deleted successfully"))})).catch((function(e){console.error(e),L("error","Error deleting person")}))}})]})};a.a.render(Object(o.jsx)(p,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.90ed7a1a.chunk.js.map